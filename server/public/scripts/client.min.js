var myApp=angular.module("myApp",["ngRoute"]);myApp.config(["$routeProvider","$locationProvider",function(a,b){b.hashPrefix(""),a.when("/home",{templateUrl:"/views/templates/home.html",controller:"LoginController"}).when("/register",{templateUrl:"/views/templates/register.html",controller:"LoginController"}).when("/user",{templateUrl:"/views/templates/user.html",controller:"ChildrenController",resolve:{getuser:["UserService",function(a){return a.getuser()}]}}).when("/info",{templateUrl:"/views/templates/info.html",controller:"ChildController",resolve:{getuser:["UserService",function(a){return a.getuser()}]}}).when("/info/:child_id/:name",{templateUrl:"/views/templates/info.html",controller:"ChildController",resolve:{getuser:["UserService",function(a){return a.getuser()}]}}).when("/events",{templateUrl:"/views/templates/events.html",controller:"InfoController",resolve:{getuser:["UserService",function(a){return a.getuser()}]}}).when("/milestones",{templateUrl:"/views/templates/milestones.html",controller:"InfoController",resolve:{getuser:["UserService",function(a){return a.getuser()}]}}).when("/medicalinfo",{templateUrl:"/views/templates/medicalinfo.html",controller:"InfoController",resolve:{getuser:["UserService",function(a){return a.getuser()}]}}).when("/resources",{templateUrl:"/views/templates/resources.html",controller:"InfoController",resolve:{getuser:["UserService",function(a){return a.getuser()}]}}).when("/contact",{templateUrl:"/views/templates/contact.html",controller:"InfoController",resolve:{getuser:["UserService",function(a){return a.getuser()}]}}).otherwise({redirectTo:"home"})}]),myApp.controller("ChildController",["$scope","$http","$location","$routeParams","ChildService",function(a,b,c,d,e){console.log("Child Control sourced :"),console.log(d.name),console.log("id"+d.child_id),a.name=d.name;a.addDetail=function(a){console.log("type="+a.eventtype),a.id=d.child_id,e.addDetail(a)},e.getDetails(d.name),a.eventsList=e.eventsList,a.removeEvent=e.removeEvent,a.editEvent=e.editEvent}]),myApp.controller("ChildrenController",["$scope","$http","$location","UserService",function(a,b,c,d){console.log("child sourced :");a.addChild=function(a){console.log("come here"),console.log("child first"+a.first),console.log("child last"+a.last),console.log("dob"+a.dob),console.log("gender"+a.gender),d.addChild(a)},d.getChildren(),a.childrenList=d.childrenList,console.log("childrenlist from fac",d.childrenList),a.editaChild=function(a){console.log("here is a child to edit",a),d.editaChild(a)}}]),myApp.controller("InfoController",["$scope","$http","$location","UserService",function(a,b,c,d){a.logout=d.logout}]),myApp.controller("LoginController",["$scope","$http","$location","UserService",function(a,b,c,d){a.user={username:"",password:""},a.message="",a.login=function(){""===a.user.username||""===a.user.password?a.message="Enter your username and password!":(console.log("sending to server...",a.user),b.post("/",a.user).then(function(b){b.data.username?(console.log("success: ",b.data),c.path("/user")):(console.log("failure: ",b),a.message="Wrong!!")}))},a.registerUser=function(){""===a.user.username||""===a.user.password?a.message="Choose a username and password!":(console.log("sending to server...",a.user),b.post("/register",a.user).then(function(a){console.log("success"),c.path("/home")},function(b){console.log("error"),a.message="Please try again."}))}}]),myApp.controller("UserController",["$scope","$http","$location","UserService",function(a,b,c,d){a.userObject=d.userObject,a.logout=d.logout}]),myApp.factory("ChildService",["$http","$location","$route",function(a,b,c){console.log("User Service Loaded");var d={events:[]},e=function(b){console.log("id",b.id),console.log("date",b.date),console.log("time",b.time),console.log("note",b.note),console.log("note",b.eventtype),console.log("child "+b),a.post("/detail",b).then(function(a){console.log(a),f()})},f=function(b){console.log("id"+b),a.get("/detail/5900f07accf61604533a7233").then(function(a){console.log("events",a),d.events=a.data})},g=function(b){a.delete("/detail/"+b._id).then(function(a){console.log(a),f()})};return{editEvent:function(a){console.log("here is the factory",a)},removeEvent:g,getDetails:f,eventsList:d,addDetail:e}}]),myApp.factory("UserService",["$http","$location",function(a,b){console.log("User Service Loaded");var c={},d={},e=function(b){console.log("child "+b),a.post("/child",b).then(function(a){f()})},f=function(){a.get("/child").then(function(a){d.children=a.data,console.log("get a child",d)})};return{userObject:c,addChild:e,getChildren:f,childrenList:d,editaChild:function(b){console.log("child",b),a.put("/child",b).then(function(a){console.log(a),f()})},getuser:function(){a.get("/user").then(function(a){a.data.username?(c.userName=a.data.username,console.log("User Data: ",c.userName)):b.path("/home")})},logout:function(){a.get("/user/logout").then(function(a){console.log("logged out"),b.path("/home")})}}}]);